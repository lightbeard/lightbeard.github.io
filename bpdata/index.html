<html>
<head>
  <title>Irritability Instrument</title>
  <!-- CSS only -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">

<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

<!-- JavaScript Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>
</head>
<body style="padding-left: 2em">

<br>

<h4>IRRITABILITY</h4>

<p>How much have you suffered from irritability?</p>
<select id="q1">
  <option value="not_answered"></option>
  <option value="0">Not At All - 0</option>
  <option value="1">Mildly - 1</option>
  <option value="2">Mildly - 2</option>
  <option value="3">Mildly - 3</option>
  <option value="4">Moderately - 4</option>
  <option value="5">Moderately - 5</option>
  <option value="6">Moderately - 6</option>
  <option value="7">Markedly - 7</option>
  <option value="8">Markedly - 8</option>
  <option value="9">Markedly - 9</option>
  <option value="10">Extremely - 10</option>
</select>
<br><br>

<h4>FRUSTRATION</h4>

<p>How much have you suffered from frustration?</p>
<select id="q2">
  <option value="not_answered"></option>
  <option value="0">Not At All - 0</option>
  <option value="1">Mildly - 1</option>
  <option value="2">Mildly - 2</option>
  <option value="3">Mildly - 3</option>
  <option value="4">Moderately - 4</option>
  <option value="5">Moderately - 5</option>
  <option value="6">Moderately - 6</option>
  <option value="7">Markedly - 7</option>
  <option value="8">Markedly - 8</option>
  <option value="9">Markedly - 9</option>
  <option value="10">Extremely - 10</option>
</select>
<br><br>

<h4>EDGINESS / IMPATIENCE / OVEREACTION</h4>

<p>How much have you suffered from edginess / impatience / overeaction to minor annoyances?</p>
<select id="q3">
  <option value="not_answered"></option>
  <option value="0">Not At All - 0</option>
  <option value="1">Mildly - 1</option>
  <option value="2">Mildly - 2</option>
  <option value="3">Mildly - 3</option>
  <option value="4">Moderately - 4</option>
  <option value="5">Moderately - 5</option>
  <option value="6">Moderately - 6</option>
  <option value="7">Markedly - 7</option>
  <option value="8">Markedly - 8</option>
  <option value="9">Markedly - 9</option>
  <option value="10">Extremely - 10</option>
</select>
<br><br>

<h4>MOODINESS</h4>

<p>How much have you suffered from moodiness?</p>
<select id="q4">
  <option value="not_answered"></option>
  <option value="0">Not At All - 0</option>
  <option value="1">Mildly - 1</option>
  <option value="2">Mildly - 2</option>
  <option value="3">Mildly - 3</option>
  <option value="4">Moderately - 4</option>
  <option value="5">Moderately - 5</option>
  <option value="6">Moderately - 6</option>
  <option value="7">Markedly - 7</option>
  <option value="8">Markedly - 8</option>
  <option value="9">Markedly - 9</option>
  <option value="10">Extremely - 10</option>
</select>
<br><br>

<h4>ANGER WITH SELF</h4>

<p>How much have you suffered from feelings of anger with yourself?</p>
<select id="q5">
  <option value="not_answered"></option>
  <option value="0">Not At All - 0</option>
  <option value="1">Mildly - 1</option>
  <option value="2">Mildly - 2</option>
  <option value="3">Mildly - 3</option>
  <option value="4">Moderately - 4</option>
  <option value="5">Moderately - 5</option>
  <option value="6">Moderately - 6</option>
  <option value="7">Markedly - 7</option>
  <option value="8">Markedly - 8</option>
  <option value="9">Markedly - 9</option>
  <option value="10">Extremely - 10</option>
</select>
<br><br>

<h4>ANGER WITH OTHERS</h4>

<p>How much have you felt angry towards others?</p>
<select id="q6">
  <option value="not_answered"></option>
  <option value="0">Not At All - 0</option>
  <option value="1">Mildly - 1</option>
  <option value="2">Mildly - 2</option>
  <option value="3">Mildly - 3</option>
  <option value="4">Moderately - 4</option>
  <option value="5">Moderately - 5</option>
  <option value="6">Moderately - 6</option>
  <option value="7">Markedly - 7</option>
  <option value="8">Markedly - 8</option>
  <option value="9">Markedly - 9</option>
  <option value="10">Extremely - 10</option>
</select>
<br><br>

<h4>TEMPER</h4>

<p>How much have you lost your temper, shouted or snapped at others?</p>
<select id="q7">
  <option value="not_answered"></option>
  <option value="0">Not At All - 0</option>
  <option value="1">Mildly - 1</option>
  <option value="2">Mildly - 2</option>
  <option value="3">Mildly - 3</option>
  <option value="4">Moderately - 4</option>
  <option value="5">Moderately - 5</option>
  <option value="6">Moderately - 6</option>
  <option value="7">Markedly - 7</option>
  <option value="8">Markedly - 8</option>
  <option value="9">Markedly - 9</option>
  <option value="10">Extremely - 10</option>
</select>
<br><br>
<button>Submit</button>
<br>
<br>

<script>

$('button').click(_ => {

  let score = 0;
  let answers = $('select');
  for (let answer of answers) {
    if($(answer).val() === 'not_answered') {
      alert('answer all questions');
      return;
    } else {
      score += Number($(answer).val());
    }
  }

  $.get( "https://jsonblob.com/api/jsonBlob/267f36d6-bd95-11eb-a392-416171a05f3d", function( data ) {

    if(data.length > 0) {
      let last = data[data.length - 1];
      if((new Date(last.date)).setHours(0,0,0,0) == (new Date()).setHours(0,0,0,0)) {
        alert('there was already a submission for today');
        return;
      }
    }

    data.push({
      score: score,
      date: new Date()
    });

    $.ajax({
      type: "PUT",
      contentType: "application/json",
      url: "https://jsonblob.com/api/jsonBlob/267f36d6-bd95-11eb-a392-416171a05f3d",
      data: JSON.stringify(data),
      dataType: "json"
    }).fail(_ => alert('something went wrong!')).done(_ => {
      $('body').html('<h2>Done!</h2>');
    });

  }).fail(_ => alert('something went wrong!'));
});


</script>

</body>
</html>
